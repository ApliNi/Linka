<!DOCTYPE html>

<html lang="zh-cmn-Hans">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=0.7, minimum-scale=0.7, maximum-scale=0.7, user-scalable=0">
	<meta content="telephone=no" name="format-detection">

	<title>[IpacEL]/ LinkaC.测试</title>
	<meta name="Description" content="LinkaC的测试网页">
	<link rel="manifest" href="manifest.json">
	<meta name="theme-color" content="#202124">
	<link rel="apple-touch-icon" href="/plugins/img/icon_512_big_b.png" sizes="512x512">

	<!-- 基础样式 -->
	<link rel="stylesheet" href="/plugins/cake.css?v=1.96">
	<link rel="stylesheet" href="cake/ui.css?v=0.1.2">

	<!-- 功能库 -->
	<script type="text/javascript" src="cake/lib/main.lib.js?v=0.1.2"></script>
	<script type="text/javascript" src="cake/lib/lib.js?v=0.1.2"></script>
	<!-- 初始化程序 -->
	<script type="text/javascript" src="cake/starter.js?v=0.1.2"></script>
	<script type="text/javascript" src="cake/event.js?v=0.1.2"></script>
	<!-- 主程序 -->
	<script type="text/javascript" src="cake/main.js?v=0.1.2"></script>
	<script type="text/javascript" src="cake/loop.js?v=0.1.2"></script>
	<!-- worker模块 -->
	<script type="text/javascript" src="cake/worker/worker.js?v=0.1.2"></script>
	<!-- 流 -->
	<script type="text/javascript" src="cake/flow/ui.js?v=0.1.2"></script>

	<!-- 动态加载资源, 从 ./LinkaC.json -->
</head>
<body>
	<div id="main" style="opacity: 0;">

		<!-- 场景层 -->
		<div id="background" class="moveFollowLayer">

			<div style="left: -295px; top: 0; width: 1000px; height: 0px; border-top: 4px dashed var(--c);transform: scalex(5) rotate(180deg);transform-origin: 0;"></div>

			<div style="left: 0; top: 0;">
				<p style="margin: 0; line-height: 0px;"><- <span style="padding: 2px 7px; background-color: #000; color: #fff;">重生点</span></p>
			</div>

			<div style="left: -187px; top: -133px;">
				<p>如果无法正常使用, 请按下 Ctrl+F5 或清除浏览器缓存</p>
				<p>已支持动端! 请使用<b>正常</b>的<b>新版本</b>浏览器访问</p>
			</div>

			<div style="left: 81px; top: 0px; margin: 0 50px;">
				<p style="margin: 0;">PC端操作方式: </p>
				<p>[W]: 向前移动</p>
				<p>[S]: 向后移动</p>
				<p>[A]: 向左移动</p>
				<p>[D]: 向右移动</p>
				<p>[T][Backspace]: 打开聊天界面</p>
				<p>[Tab]: 显示实体列表</p>
				<p>[ESC]: 关闭当前组件</p>
				<p>[Enter][Space]: 确认/选中</p>
				<p>[F3]: 显示调试信息(PC)</p>

				<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br />
				<div>
					<p>MD语法支持: 图片`![]()`, 自动url`https://ipacel.cc/`, 反斜杠转义字符(用于取消md解析)`\\`</p>
				</div>

				<br />
				<div>
					<p id="ccc"></p>
					<p id="cccc" style="position: absolute; left: -42px; top: 456px;">[A]</p>
				</div>
			</div>


			<!-- <div id="logo-en" class="logo -en" title="logo-en">LinkaJS</div> -->
			<div id="logo-en" class="logo -en" title="logo-en" style="left: 399px; top: 0px;">LinkaJS</div>
			<!-- <div id="logo-zh" class="logo -zh" title="logo-zh">林桛框架</div> -->
			<div id="logo-zh" class="logo -zh" title="logo-zh" style="left: 1100px; top: 0px;">林桛框架</div>


			<div style="left: 399px; top: 190px; margin: 20px; margin-left: 0;">
				<p>linkaS 的测试游戏 <a href="https://github.com/ApliNi/Linka">Github</a></p>
				<p>我有一个在线上改代码的习惯. 如果您遇到了任何问题, 请尝试使用 Ctrl+F5 一次. 如果问题依旧那我可能还在改代码</p>

				<br />
				<p>开发者名单: </p>
				<!-- <p> - ApliNi: all</p>
				<p> - villager: 提供算法和方案上的帮助</p> -->
			</div>

			<div style="left: 1249px; top: 210px; margin: 20px;">
				<p>规则构建中...</p>

				<br />
				<p>计划队列: </p>
				<p> - a更好的聊天系统</p>
				<p>游戏的3个图层: 操作界面层(操作界面包含3大件: 特殊交互, 基础交互, 数据显示) > 实体层 > 场景层(场景层中的场景模块可以在其他图层之上, 也可以有自己的缩放中心以及移动跟随步长乘数. 场景以区块为单位进行加载, 编写场景时需要定义场景加载范围, 当玩家的可视范围接触到场景加载范围则动态加载到客户端); 客户端3个循环: 用户操作循环 < 主体运算循环 < 网络通讯循环; 数据的3个类型: 运算缓存数据, 主体缓存数据, 用户配置数据. (运算缓存有主体缓存数据的索引(用于在循环中快速查找大量数据), 各种临时数据(用于框架的功能实现), 性能分析数据(收集数据以便优化), 脚本指针和临时数据(脚本解析器产生的数据), 场景缓存(或预加载)). 饼画的太大了, 能实现一半都算不错的了..</p>
				<p>添加"默认配置", 每个功能有自己的默认配置, 脚本会覆盖在默认配置上然后交给功能实现程序. 那么脚本就会有一个编译过程, 我不打算再写一个编译器, 大概会直接在客户端临时编译. 然后从性能分析数据中得到常用脚本并编译后覆盖在客户端缓存的原始脚本上?? (好像想到了什么熟悉的东西</p>
				<p> - c开始菜单</p>
				<p> - s根据负载自动增减线程数</p>
				<p> - a拖拽上传图片</p>
				<p> - a本地的收藏图片</p>
				<p> - c客户端的 Loki.js, 或者服务端的实体剔除?</p>

				<br />
				<p>v0.3更新日志: </p>
				<p> - s添加描述文件, 优化循环部分</p>
				<p> - c更新插件加载器, 以及配置文件格式</p>
				<p> - c优化循环部分, 整理代码</p>
				<p> - c再次修复移动端滚动问题</p>
				<p> - c一些细节优化</p>
				<p> - !c重写前端, 实现与服务器相同的扩展能力 !!待测试</p>
				<p> - c通过CSS实现更平滑的Tpsbar</p>
				<p> - c一些错误修复</p>
				<p> - a更好的心跳包和ping显示, 将连接超时时间改为20秒</p>
				<p> - a显示玩家断开的方式: 断开连接|连接丢失|心跳超时</p>
				<p> - s更好的指令消息输出</p>
				<p> - c!解决移动端滚动条, 正则表达式等兼容问题</p>
				<p> - !s整理后端代码, 添加事件, 更好的扩展能力</p>
				<p> - s简洁的主程序</p>
				<p> - !s使用 Loki.js 内存数据库代替普通json</p>
				<p> - a添加指令系统</p>
				<p> - s更好的日志系统</p>
				<p> - s更好的初始化程序</p>
				<p> - a更好的聊天组件, 新UI和少部分MD语法支持</p>

				<br />
				<p>v0.2更新日志: </p>
				<p> - c组件位置使用绝对定位</p>
				<p> - c后台运行时通过系统通知显示聊天消息</p>
				<p> - c完整的支持后台运行</p>
				<p> - c为陀螺仪控制添加自定义原点功能</p>
				<p> - c更好的键盘操作动态移速</p>
				<p> - c添加移动端传感器支持</p>
				<p> - c添加"速度倍率", 用于控制移动速度</p>
				<p> - c添加PWA应用</p>
				<p> - c将一些东西移动到Worker线程.ing</p>
				<p> - s服务器发包支持(排除玩家), 用于节省流量</p>
				<p> - c更好的聊天组件</p>
				<p> - c添加移动端支持, 添加url参数`isPE = true|false`. PC端默认false, 移动端为true</p>
				<p> - i遇到了点问题, 过几天再回来. Edit: 2022年12月8日: 开发者回来啦! 最近更新可能有点慢</p>
				<p> - c尝试优化玩家移动, 在短时间内动态增加步长到最大值</p>
				<p> - a再次重写NPC, 提供更多扩展性, 优化代码</p>
				<p> - a允许NPC的一个程序组同时监听多个事件</p>
				<p> - c重写NPC消息处理程序, 添加更多功能</p>
				<p> - s添加配置载入功能, 用于加载大量的配置数据</p>
				<p> - c修复过渡动画图层缩放导致实体偏移</p>
				<p> - c性能优化</p>
				<p> - a重写NPC解析器, 简化JSON, 提高性能</p>
				<p> - c一些细节优化</p>
				<p> - c调试信息界面, 使用F3打开</p>
				<p> - a添加历史消息回放功能, 玩家加入退出消息显示</p>
				<p> - a更好的延迟计算</p>
				<p> - c解决由浏览器记住上次滚动位置造成的偏移 通过 `history.scrollRestoration = 'manual'`</p>
				<p> - a简化NPC的脚本</p>
				<p> - a-NPC脚本自定义运行条件from触发方式, NPC程序: 修改程序指针, NPC程序: 清除消息</p>
				<p> - a-NPC实体定义触发条件 和 NPC程序定义触发条件 和 NPC程序组定义触发条件</p>
				<p> - i设计一个图标, 没错, 就是上面那个标题)</p>
				<p> - c动态自适应窗口大小</p>
				<p> - c添加"彩蛋1"</p>
				<p> - c添加循环管理器, 防止循环意外运行, 降低资源消耗</p>
				<p> - c添加更多动效</p>
				<p> - c!更换网页宽高获取方式, 兼容性bug, 待验证</p>
				<p> - c!暂时移除反作弊, 受延迟影响实体位置被回滚, 没有考虑数据包错序</p>
				<p> - r线上运行测试! 高延迟场景</p>
				<p> - c为NPC添加更多触发事件和功能扩展空间</p>
				<p> - c添加动画库.js, 动画库.css</p>
				<p> - c-NPC脚本解析器</p>
				<p> - a为NPC添加脚本功能</p>
				<p> - a添加NPC实体标签</p>
				<p> - a数据包合并框架, 所有数据在队列中, 根据网络io-tps统一打包发送</p>
				<p> - s严格的数据预处理, 防止注入</p>
				<p> - a更好的移动处理, 防止走斜线速度过快</p>
				<p> - a更好的实体碰撞处理</p>
				<p> - a-Tpsbar</p>
				<p> - c更好的玩家移动动画, 解决实体抽搐</p>
				<p> - c组件运行时检查是否有与自己不兼容的组件正在运行</p>
				<p> - c!解决实体方向的bug, 浏览器中实体css.top与y轴方向相反</p>
				<p> - c添加碰撞箱 / 偏航角显示</p>
				<p> - c将固定反向移动改为通过偏航角移动 #支持摇杆全向移动</p>
				<p> - a实现玩家注册, 动态添加实体, 同步服务器已有实体数据</p>
				<p> - a简单的实体索引</p>
				<p> - a将玩家归类为实体, 通过实体标签区分 #NBT</p>
				<p> - a实体自适应扩展数据</p>
				<p> - a添加url参数`name=名称`. 默认为'未命名玩家'</p>
				<p> - a软件重写, 已实现v0.1的所有功能</p>

				<br />
				<p>v0.1更新日志: </p>
				<p> - a自适应玩家数 / 心跳 / 加入/退出</p>
				<p> - c添加图层?</p>
				<p> - s对玩家的目标行为进行验证 #反作弊</p>
				<p> - s实现数据广播</p>
				<p> - s实现玩家移动处理/聊天处理</p>
				<p> - s数据处理队列</p>
				<p> - a实现通讯</p>
				<P> - c添加聊天ui</P>
				<p> - c通过url初始化玩家数据</p>
				<p> - c实现玩家移动, 通过键盘操作</p>
				<p> - i添加更新日志</p>
			</div>

			<div style="left: 6143px; top: 210px; margin: 20px;">
				<p>我希望我还 , 热爱着歌唱 . 我希望这是 , 最后一次沮丧</p>
			</div>

			<div style="left: -1447px; top: 491px;">
				<div title="地毯" style="width: 643px;
				height: 801px;
				position: absolute;
				top: -142px;
				left: 191px;
				transform: rotate3d(-2, -1, 2, 280deg);
				background: #655;
				background-image: radial-gradient(tan 40%, transparent 0), radial-gradient(tan 0%, transparent 0);
				filter: drop-shadow(-2px 2px 5px rgb(0, 0, 0, 50%));
				background-size: 40px 40px;"></div>
				<img alt="木桌" decoding="async" importance="low" loading="lazy" src="https://i.328888.xyz/2022/12/10/fvISo.png" width="325px" style="left: 335px; top: 108px; filter: drop-shadow(-2px 2px 5px rgb(0, 0, 0, 50%)); position: absolute; z-index: 21;">
				<img alt="花瓶" decoding="async" importance="low" loading="lazy" src="https://i.328888.xyz/2022/12/10/fPxn3.png" width="150px" style="position: absolute; left: 425px; top: 28px; z-index: 21;">
				<img alt="笔记本电脑" decoding="async" importance="low" loading="lazy" src="https://i.328888.xyz/2022/12/10/fvrVN.png" width="150px" style="position: absolute; left: 368px; top: 107px; filter: drop-shadow(-2px 1px 2px rgb(0, 0, 0, 50%)); z-index: 21;">
			</div>
		</div>

		<!-- 玩家层 -->
		<div id="all-player" class="moveFollowLayer"></div>

		<!-- TPSBAR -->
		<div id="tpsbar">
			<p>TPS: <span class="_tps"></span>&nbsp;&nbsp; MSPT: <span class="_mspt"></span>&nbsp;&nbsp; PING: <span class="_ping"></span>ms</p>
			<div><div class="a"></div></div>
		</div>

		<!-- 聊天组件 -->
		<div id="message" class="">
			<!-- 聊天内容框 -->
			<div id="message-list" class="--user_select"></div>

			<!-- 输入框背景div, 发送按钮, 输入框 -->
			<div class="message_input_bc">
				<button class="btn" onclick="main_send({type: 'sendMessage'}); _document_onkeyup({code: 'Escape'});">发送</button>
			</div>
			<input id="message-input" maxlength="2048" />
		</div>

		<!-- 玩家选择消息 -->
		<div id="decision" title="点击或使用[W][S]键选择, 点击确认键即可提交"></div>


		<!-- 窗口动效层 -->
		<div id="_window"></div>

		<!-- 插件dom默认位置 -->
		<div id="_plugins" class="plugins">

		</div>
	</div>
</body>
</html>
